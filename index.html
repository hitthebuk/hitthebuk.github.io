<!DOCTYPE html>
<html lang="ko" ng-app ng-controller="httpTest">
  <head>
    <!-- Google Analytics Content Experiment code -->
    <script>function utmx_section(){}function utmx(){}(function(){var
    k='151327763-0',d=document,l=d.location,c=d.cookie;
    if(l.search.indexOf('utm_expid='+k)>0)return;
    function f(n){if(c){var i=c.indexOf(n+'=');if(i>-1){var j=c.
    indexOf(';',i);return escape(c.substring(i+n.length+1,j<0?c.
    length:j))}}}var x=f('__utmx'),xx=f('__utmxx'),h=l.hash;d.write(
    '<sc'+'ript src="'+'http'+(l.protocol=='https:'?'s://ssl':
    '://www')+'.google-analytics.com/ga_exp.js?'+'utmxkey='+k+
    '&utmx='+(x?x:'')+'&utmxx='+(xx?xx:'')+'&utmxtime='+new Date().
    valueOf()+(h?'&utmxhash='+escape(h.substr(1)):'')+
    '" type="text/javascript" charset="utf-8"><\/sc'+'ript>')})();
    </script><script>utmx('url','A/B');</script>
    <!-- End of Google Analytics Content Experiment code -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-99843709-1', 'auto');
      ga('send', 'pageview');
    </script>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-WR74PM6');</script>
    <!-- End Google Tag Manager -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Web developer guide document">
    <meta name="keywords" content="HTML, CSS, JS, JavaScript, node, angularjs, framework, bootstrap, web development">
    <meta name="author" content="hitthebuk(unick)">
    <title>Web Developer Guide Document</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">
    <style>
    body {
      padding-top: 70px;
    }
    footer hr {
      margin-bottom:0;
    }
    footer div {
      padding:20px 15px;
      background-color:#fff;
    }
    </style>
  </head>

  <body role="document">
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WR74PM6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div id="navHeader" class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav"></ul>
          <ul class="nav navbar-nav navbar-right"></ul>
        </div>
      </div>
    </nav>

    <div id="contents" class="container" role="main"></div>

    <footer>
      <hr class="featurette-divider">
      <div class="container">
        <p class="pull-right"><a href="#">TOP</a></p>
        <p>&copy; Copyright 2017 hitthebuk.</p>
      </div>
    </footer>

    <script src="https://code.jquery.com/jquery-latest.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js"></script>

    <script src="/js/bootstrap/docs.min.js"></script>
    <script src="/js/bootstrap/ie10-viewport-bug-workaround.js"></script>
    <script>
      var httpTest = function($scope, $http) {
        $http({
        	method: 'GET',
        	url: 'https://s3.ap-northeast-2.amazonaws.com/hitthebuk.github.io/menu.json',
        	headers: {'Content-Type': 'application/json; charset=utf-8'}
        })
        .success(function(data, status, headers, config) {
        	if(data) {
            $("#navHeader").append("<a href=\""+data.logo.link+"\" class=\"navbar-brand\">"+data.logo.title+"</a>");
            $("#navbar ul").html("");
            $.each(data.default, function(i, d) { $("#navbar ul:eq(0)").append("<li><a href=\""+d.link+"\""+(d.target?" target=\""+d.target+"\"":"")+">"+d.menu+"</a></li>"); });
            //$("#navbar ul:eq(0) li:eq(0)").addClass("active"); // 현재 선택된 메뉴를 표시하는 로직 추가 필요
            $.each(data.right, function(i, d) { $("#navbar ul:eq(1)").append("<li><a href=\""+d.link+"\""+(d.target?" target=\""+d.target+"\"":"")+">"+d.menu+"</a></li>"); });
        	} else { console.log("에러"); }
        })
        .error(function(data, status, headers, config) { console.log(data, status, headers, config); });
        $http({
        	method: 'GET',
        	url: 'https://s3.ap-northeast-2.amazonaws.com/hitthebuk.github.io/start.json',
        	headers: {'Content-Type': 'application/json; charset=utf-8'}
        })
        .success(function(data, status, headers, config) {
        	if(data) {
            if(data.message && data.message.title && data.message.desc) $("#contents").append("<div class=\"jumbotron\"><h1>"+data.message.title+"</h1><p>"+data.message.desc+"</p></div>");
            if(data.contents) $.each(data.contents, function(i, d) { $("#contents").append("<div class=\"page-header\"><h1>"+d.title+"</h1></div>"+d.content.replace(/&quot;/g,"\"")); });
        	} else { console.log("에러"); }
        })
        .error(function(data, status, headers, config) { console.log(data, status, headers, config); });
      };
    </script>
  </body>
</html>
